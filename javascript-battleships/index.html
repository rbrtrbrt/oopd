<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Page Title</title>
  <link rel="stylesheet" href="../css/main.css"/>
</head>
<body class="line-numbers">
  <aside id="toc-column"></aside>
  <aside id="agenda">
    <h1>time table</h1>
    <div include="../agenda.html"></div>
  </aside>
  <div id="page">
    <main>

  <h1>16: final task JavaScript: Battleships</h1>
  
  <p>In this final task for JavaScript, you are going to create an online version of the popular boardgame <i>battleships</i>. For those unfamiliar with the game, below is a detailed video about the game.</p>
  <youtube ytid="q0qpQ8doUp8"></youtube>
  <h4>the code</h4>  
  <p>
    To get you started we created a sort-of-working version of the game. It's a working program, but much functionality is missing: Boats can only be placed horizontally, there is no way to know who has won and the computer is playing like an idiot. You get the idea: you are going to improve this game.  Download the file, open it in a browser and play around with it. In assignment 1, we are going to explore the code. 
    </p>
    <download href="./battleships.html" >Download the code</download>
    <p>This video is a through walkthrough of the code. Watch it carefully.</p>
    <youtube ytid="EwGSbNmADWs"></youtube>

      <h4>how to get a passing grade</h4>  
      <p>There are 10 tasks on this page, for which you can earn a total of 10 points. Each assignment is marked by one of these emoji: üëâ (pointing hand), üëç (thumbs up), and üëè (clapping hands).</p>
      <table>
        <tr>
          <td style="font-size: larger;">üëâ</td>
          <td>The <b>required tasks</b> are marked with <i>the pointing hand</i>.<br>
            You cannot get a passing grade if you're missing any of these tasks.
            Doing all of these required tasks well (see next section) can earn you 6 points.
          </td>
        </tr>
        <tr>
          <td style="font-size: large;">üëç</td>
          <td>The three <b>additional features</b> are marked with the <i>thumbs up</i> emoji.<br> 
            Each of these can earn you an extra &frac34; point each.
          </td>
        </tr>
        <tr>
          <td style="font-size: larger;">üëè</td>
          <td>Finally, there are two general <b>bonus</b> tasks, marked with the <i>clapping hands</i>.<br>
              Add a cool improvement or improve your code quality, and you can score an additional full point for each bonus assignment.
          </td>
        </tr>
      </table>  
  
      <h4>what does it mean to do the tasks well?</h4>
      <ol>
        <li>The code does what is required. It doesn't have side-effects that aren't required.<br>If, however, you feel like improving on the requirements and adding extra or better features, you're welcome. But your cool innovation should not be sidestepping an important programming challenge. Check with your teacher.</li>
        <li>The following basic code quality aspects are OK:
          <ul>
            <li>good names for variables and functions;</li>
            <!-- <li>the correct datatypes for variables, parameters and return values;</li> -->
            <li>proper indentation of code;</li>
            <li>no unneccessary global variables.</li>
          </ul>
        </li>
        <li>The code is clearly your own code. You can share plans, ideas and hints with classmates. But don't code your solutions together and don't share code fragments.</li>
      </ol>
  
    <section class="assignment">
    <h4>16.0: sending in the Battleships assignment</h4>
    <answer noslider buttontext="mail the battleships program">Send in your code. If your solution uses multiple files, make sure you add them all to the email.</answer> 
    </section>

    <h4 id="isas">iSAS</h4>
    <p>If you're not an Academy for IT and Media Design regular, you may not be familiar with <a href="https://isas.han.nl">iSAS</a>. iSAS is (one of) our information system(s), and you have to use it to upload all the work you did for this course. We are legally oblidged to keep an archive of all the work that students recieve credits for. 
    <div class="attention">At this moment, iSAS seems to be configured incorrectly for our minor. We have just discovered the problem, and we expect to have this fixed in the next few days. So don't upload anything just yet. <b>Wait until you get a mail with instructions before uploading anything to iSAS</b></div>  
      <!--You don't have to upload your work right away. The deadline is 7&frac12; weeks after the start of the course. Use your HAN-account to <a href="https://isas.han.nl">log&nbsp;in&nbsp;to&nbsp;iSAS</a>. iSAS will tell you the exact date for the deadline.</p>
    <p>After logging in, you'll find that iSAS wants you to upload four things, with unfamiliar names. That is because the information structure in iSAS has not been updated to reflect the current structure of the course (it's also not in English). Here's what you have to upload:</p>
    <table>
      <tr>
        <th>iSAS name</th><th>what to upload</th>
      </tr>
      <tr>
        <td>Blog</td><td>All the files for this assignment: <b>Battleships</b></td>
      </tr>
      <tr>
        <td>Rofl</td><td>All the files for the Arduino assignment: <b>Burglar Alarm</b></td>
      </tr>
      <tr>
        <td>Documenteer leerproces</td><td><i>leave this one empty</i></td>
      </tr>  
      <tr>
        <td>Oefenopdrachten</td><td>All the code for <b>all the homework assignments</b>.</td>
      </tr>
    </table>
  -->
  <h3>16.1: exploration  <span class="task-type">(warming-up task)</span></h3>
  <section class="assignment">
  <p>This assignment asks some questions about the code. Answering them will help you get a feel for what is going on.</p>
  <ol type="text">
    <li>Which code is executed when the program starts?</li>
    <li>Which code is executed when something is clicked?</li>
    <li>What does the <code>createMySea()</code> function do?</li>
    <li>After the program starts. How many elements are there in the <code>mySquares</code> array?</li>
    <li>What is the difference between a square on the canvas and a square in the mySquares array?</li>
    <li>What does the <code>createFriendlyGridSquare()</code> function do?</li>
    <li>What does the <code>changeSquareStateAndRedraw()</code> function do? Try to get it to do something by calling it (with the proper arguments) in the console.</li>
    <li>When is the <code>gameSetupRound()</code> function called? What does the parameter do?</li>  
    <li>When is the <code>playRound()</code> function called?</li>  
    <li>What does the <code>createEnemySea()</code> function do? How does it differ from the <code>createMySea()</code> function?</li>
    <li>What does <code>currentShipIndex</code> represent?</li>
    <li>Why do you think the maker of this assignment went through the trouble of making the <code>getSquareSize()</code> function? </li>
  </ol>
  <answer buttontext="mail your answers">We're going to do this assignment in class. So send in this one as part of the session.</answer>
  </section>

  <h3><span style="font-size: larger">üëâ</span> 16.2: hints <span class="task-type">(required task)</span></h3>
  <p>The game is a bit confusing for the user. Make sure there always is a hint on the screen telling the user what to do.</p>
  <p><i>Example hints: </i> </p>
  <ul>
    <li>Place boat of length 3.</li>
    <li>Throw bomb in enemy sea.</li>
  </ul>

  <h3><span style="font-size: larger">üëâ</span> 16.3: random boat placement <span class="task-type">(required task)</span></h3>
  <p>The enemy now places its boats in the same location every time because the array containing the enemy boats is a given. Delete the contents of this array and write code that generates a similar array, with only water in it. Then add code to place enemy ships in the enemySea randomly, and draw the enemy sea on the screen. </p>
  <p>For placing the boats, make sure the boats are placed in a valid position. 
  <ul>
    <li>What are the two ways that a boat placement could be not valid?</li>
    <li>Maybe you can reuse some functions?</li>
  </ul> 
  
  <h3><span style="font-size: larger">üëâ</span> 16.4: ships have names. <span class="task-type">(required task)</span></h3>
  <h4>16.4.a keeping track of ship-names</h4>
    <ul>
      <li>The hint saying "place boat of length 3" is a bit boring. We want it to say "Place Aircraft Carrier of length 5".</li>
      <li>The <code>shipSizes</code> array currently contains only the length of each ship. Modify it to hold <b>objects</b> (that represent the ships). Each of those objects will contain two properties: the name of the ship, and its length. Make sure the rest of the code keeps working, now that you've changed an important data structure.</li>
      <li>When placing a boat, make sure that the name of the boat is also stored in each square-object that represents a segment of the boat (after it is placed in the sea). Also store this name in the enemy's square-objects, when the enemy places its boats.</li>
    </ul>
  <h4>16.4.b Checking if a boat is sunk completely.</h4>  
  <p>After all segments (squares) of a boat have been hit, the boat is considered to be <i>sunk</i>.</p>
  <p>Whenever a bomb is thrown and hits a ship, check and see whether the sea still contains any square with the same name that isn't hit yet. Use this information to show the user which boats have already been sunk and which have not.</p>

    <br><br>
  <div class="instruction">
    <p>Some assignments are more difficult than others. You don't need to finish all of them. From this point forward, each assignment can be done independently of each other. Take your time to read all of them now. Try to guess which ones are hard and which ones are easy. Do the ones you think are easy first.</p>
    <p>The further you get, the more complex your code gets. You may need to modify code of earlier assignments in order to get others to work.</p>
  </div>

  <h3><span style="font-size: larger">üëâ</span> 16.5: double <span class="task-type">(required task)</span></h3>
  <p>Both the computer and the human player can throw bombs at the same location twice. Modify the game to prevent this from happening.</p>

  <h3><span style="font-size: larger">üëâ</span> 16.6: vertical <span class="task-type">(required task)</span></h3>
  <ul>
    <li>Add a button to the interface. The player should be able to use this button while placing boats to toggle between placing boats vertically and horizontally.</li>
    <li>Write code that allows a player (and the computer) to place boats horizontally. Make sure boats are only placed on valid positions. (They should not overlap and should respect the borders of the sea).</li>
  </ul>

<h3><span style="font-size: larger">üëç</span> 16.7: winner <span class="task-type">(additional task)</span></h3>
 <p> The game should notify the player when there is a winner and who won.</p>

<h3><span style="font-size: larger">üëç</span> 16.8: canvas <span class="task-type">(additional task)</span></h3>
 <p> Whenever a player drops a bomb, the game should not only change the color of the square, it should also:</p>
 <ul>
   <li>Draw a cross through the square when a player misses.</li>
   <li>Draw a circle in the centre of the square when a player hits a boat.</li>
 </ul>

 <h3><span style="font-size: larger">üëç</span> 16.9: refactor <span class="task-type">(additional task)</span></h3>
 <p>While programming, it is not uncommon for functionality of elements in your to change a bit. This can be a problem for the readability of your code if you did not carefully think about renaming the affected functions and variables whilest making your change. This assignment is about cleaning up your final code to make it more readable and more intelligent. Follow the steps and refactor your code before handing it in. Refactoring is the proces of looking back on working code and making it better.</p>

<div class="hint-content">Backup your code before proceeding!</div>
 <ul>
   <li>Do all variables contain whatever their names suggest? If not, change the name.</li>
   <li>Do functions do whatever their names suggest? If not, change their names.</li>
   <li>Can you guess whether or not a function has a return or a side-effect based on the name alone?</li>
   <li>Can you guess the (return) type of each variable and function?</li>
   <li>Can you use a function to deduplicate similar looking code?</li>
   <li>Do you have similar looking functions? Can you use a parameter to make the code more flexible?</li>
   <li>Is the flow of your program clear in a story like function like (<code>playRound()</code>, or <code>gameSetupRound()</code>)?</li>
   <li>Are there functions in your code that are nolonger used?</li>
  <li>Do comments still describe the code they are commenting about?</li>
 </ul>


<h3><span style="font-size: larger">üëè</span> 16.10: AI <span class="task-type">(bonus task)</span></h3>
 <p> The current enemy is an idiot. He throws bombs at random. Make the computer more intelligent.</p>

  <h3><span style="font-size: larger">üëè</span> 16.11: cool extras <span class="task-type">(bonus task)</span></h3>
  <p>If you're happy with your solutions to the required tasks, you can see if you can extend the Battleships game with extra features. Discuss your idea with one of the teachers to check if your idea is feasibile and helps score full marks. It is also cool if you have an interesting organization of your code in mind, or want to try out some new language features.</p>


  <section class="assignment">
  <h3>16.12: sending in the Battleships assignment</h3>
  <answer noslider buttontext="mail the battleships program">Send in your code. If your solution uses multiple files, make sure you add them all to the email.</answer> 
  <p><i>It doesn't matter if you use this send-button, or the one at the start of this page. They're the same.</i></p>
  </section>

      </main>
  </div>
<script src='../js/main.js'></script>
</body>
</html>